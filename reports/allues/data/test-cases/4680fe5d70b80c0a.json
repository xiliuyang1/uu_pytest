{"uid":"4680fe5d70b80c0a","name":"开启超级福利豆箱","fullName":"testcases.test_boxs.TestBoxs#test_open_welfare_box","historyId":"c883a0d540946475858b24ee79472f7f","time":{"start":1688093088988,"stop":1688093089073,"duration":85},"status":"failed","statusMessage":"pytest_assume.plugin.FailedAssumption: \nOriginal Failure:\n\n>> TypeError('can only concatenate str (not \"dict\") to str')\n\n1 Failed Assumptions:\n\nutils\\requests_util.py:53: AssumptionFailure\n>>\tpytest.assume(False)\nAssertionError: assert False","statusTrace":"self = <testcases.test_boxs.TestBoxs object at 0x0000021FF934FE50>\ncaseinfo = {'datas': {'lucky_id': 1123075254347735040}, 'headers': {'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8', 'token': 'dbbb2ef738375774c2ce6ce88ac619cc'}, 'method': 'post', 'name': '开启超级福利豆箱', ...}\n\n    @pytest.mark.parametrize(\"caseinfo\", read_yaml(\"/test_activity/open_welfare_box.yml\"))\n    def test_open_welfare_box(self, caseinfo):\n        allure.dynamic.title(caseinfo['name'])\n        name = caseinfo['name']\n        method = caseinfo['method']\n        url = caseinfo['url']\n        headers = read_variable_yaml(caseinfo['headers'])\n        datas = caseinfo['datas']\n        verify = caseinfo['verify']\n>       RequestsUtil().send_request(testcasename=name, method=method, url=url, headers=headers, data=datas,\n                                    verify=verify)\n\ntestcases\\test_boxs.py:149: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nutils\\requests_util.py:35: in send_request\n    RequestsUtil().set_verify_result(res, verify, testcasename=testcasename)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <utils.requests_util.RequestsUtil object at 0x0000021FF9EC33D0>\nres = <Response [200]>, verify = [{'not null': {'$..zh-CN': 1}}]\ntestcasename = '开启超级福利豆箱'\n\n    def set_verify_result(self, res=None, verify=None, testcasename=None):\n        if verify is None:\n            pass\n        if verify is not None:\n            for validateitem in verify:\n                for key in validateitem.keys():\n                    # 获取断言的预期结果：\n                    validatelist = validateitem[key]\n                    if isinstance(validatelist, dict):\n                        for verify_key, verify_value in validatelist.items():\n                            # 获取响应数据中各字段的实际响应值：（json提取器）\n                            result_value = jsonpath.jsonpath(res.json(), verify_key)\n                            if not result_value:\n                                pytest.assume(False)\n                                my_logging.error(\n>                                   \"【\" + testcasename + \"】接口断言失败，响应数据中未查询到断言对象。响应结果为：\" + res.json())\nE                               pytest_assume.plugin.FailedAssumption: \nE                               Original Failure:\nE                               \nE                               >> TypeError('can only concatenate str (not \"dict\") to str')\nE                               \nE                               1 Failed Assumptions:\nE                               \nE                               utils\\requests_util.py:53: AssumptionFailure\nE                               >>\tpytest.assume(False)\nE                               AssertionError: assert False\n\nutils\\requests_util.py:55: FailedAssumption","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"setup","time":{"start":1688093069903,"stop":1688093070963,"duration":1060},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false}],"testStage":{"status":"failed","statusMessage":"pytest_assume.plugin.FailedAssumption: \nOriginal Failure:\n\n>> TypeError('can only concatenate str (not \"dict\") to str')\n\n1 Failed Assumptions:\n\nutils\\requests_util.py:53: AssumptionFailure\n>>\tpytest.assume(False)\nAssertionError: assert False","statusTrace":"self = <testcases.test_boxs.TestBoxs object at 0x0000021FF934FE50>\ncaseinfo = {'datas': {'lucky_id': 1123075254347735040}, 'headers': {'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8', 'token': 'dbbb2ef738375774c2ce6ce88ac619cc'}, 'method': 'post', 'name': '开启超级福利豆箱', ...}\n\n    @pytest.mark.parametrize(\"caseinfo\", read_yaml(\"/test_activity/open_welfare_box.yml\"))\n    def test_open_welfare_box(self, caseinfo):\n        allure.dynamic.title(caseinfo['name'])\n        name = caseinfo['name']\n        method = caseinfo['method']\n        url = caseinfo['url']\n        headers = read_variable_yaml(caseinfo['headers'])\n        datas = caseinfo['datas']\n        verify = caseinfo['verify']\n>       RequestsUtil().send_request(testcasename=name, method=method, url=url, headers=headers, data=datas,\n                                    verify=verify)\n\ntestcases\\test_boxs.py:149: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nutils\\requests_util.py:35: in send_request\n    RequestsUtil().set_verify_result(res, verify, testcasename=testcasename)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <utils.requests_util.RequestsUtil object at 0x0000021FF9EC33D0>\nres = <Response [200]>, verify = [{'not null': {'$..zh-CN': 1}}]\ntestcasename = '开启超级福利豆箱'\n\n    def set_verify_result(self, res=None, verify=None, testcasename=None):\n        if verify is None:\n            pass\n        if verify is not None:\n            for validateitem in verify:\n                for key in validateitem.keys():\n                    # 获取断言的预期结果：\n                    validatelist = validateitem[key]\n                    if isinstance(validatelist, dict):\n                        for verify_key, verify_value in validatelist.items():\n                            # 获取响应数据中各字段的实际响应值：（json提取器）\n                            result_value = jsonpath.jsonpath(res.json(), verify_key)\n                            if not result_value:\n                                pytest.assume(False)\n                                my_logging.error(\n>                                   \"【\" + testcasename + \"】接口断言失败，响应数据中未查询到断言对象。响应结果为：\" + res.json())\nE                               pytest_assume.plugin.FailedAssumption: \nE                               Original Failure:\nE                               \nE                               >> TypeError('can only concatenate str (not \"dict\") to str')\nE                               \nE                               1 Failed Assumptions:\nE                               \nE                               utils\\requests_util.py:53: AssumptionFailure\nE                               >>\tpytest.assume(False)\nE                               AssertionError: assert False\n\nutils\\requests_util.py:55: FailedAssumption","steps":[],"attachments":[{"uid":"1f171c1fdeb259d3","name":"log","source":"1f171c1fdeb259d3.txt","type":"text/plain","size":280}],"parameters":[],"hasContent":true,"stepsCount":0,"attachmentsCount":1,"shouldDisplayMessage":true},"afterStages":[{"name":"setup::0","time":{"start":1688093103490,"stop":1688093103490,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false}],"labels":[{"name":"feature","value":"饰品盲盒模块"},{"name":"parentSuite","value":"testcases"},{"name":"suite","value":"test_boxs"},{"name":"subSuite","value":"TestBoxs"},{"name":"host","value":"DESKTOP-CM07T3T"},{"name":"thread","value":"18112-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"testcases.test_boxs"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"caseinfo","value":"{'name': '开启超级福利豆箱', 'method': 'post', 'url': '/api/activity/lucky/open', 'headers': {'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8', 'token': '{{token()}}'}, 'datas': {'lucky_id': 1123075254347735040}, 'verify': [{'not null': {'$..zh-CN': 1}}]}"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"4680fe5d70b80c0a.json","parameterValues":["{'name': '开启超级福利豆箱', 'method': 'post', 'url': '/api/activity/lucky/open', 'headers': {'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8', 'token': '{{token()}}'}, 'datas': {'lucky_id': 1123075254347735040}, 'verify': [{'not null': {'$..zh-CN': 1}}]}"]}